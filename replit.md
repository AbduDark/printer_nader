# Printer Nader - تطبيق طباعة الباركود

## نظرة عامة
تطبيق Windows Forms مكتوب بلغة Visual Basic .NET يستهدف .NET 8.0. التطبيق مصمم لطباعة أرقام متسلسلة بنظام الباركود على ملصقات بحيث يطبع رقمين في كل صفحة (لمطابقة طابعات الباركود التي تطلع ملصقين).

## الحالة الحالية (7 نوفمبر 2025)
- **المنصة**: .NET 8.0 Windows Forms Application
- **البيئة**: Replit (Linux-based) للتطوير، Windows للتشغيل
- **حالة البناء**: ✅ يبني بنجاح على Replit
- **حالة التشغيل**: ✅ يعمل بنجاح على Windows
- **حالة الاستيراد**: ✅ مكتمل - جميع الإعدادات جاهزة
- **حالة الواجهة**: ✅ تصميم كامل مع جميع الحقول مربوطة بمنطق الطباعة
- **آخر تحديث**: إكمال ربط جميع حقول الواجهة بمنطق الرسم والطباعة (7 نوفمبر 2025)

## إعدادات التصحيح (Debug)
تم إضافة إعدادات متقدمة في مجلد `.vscode/`:
- **launch.json**: إعدادات التشغيل والتصحيح (Debug و Release)
- **tasks.json**: مهام البناء والنشر
- **settings.json**: إعدادات VS Code للمشروع

راجع ملف `DEBUG_GUIDE.md` للتفاصيل الكاملة.

## هيكل المشروع
```
printer_nader/
├── Form1.vb                    # كود النموذج الرئيسي
├── Form1.Designer.vb           # تصميم الواجهة
├── Form1.resx                  # موارد النموذج
├── ApplicationEvents.vb        # أحداث التطبيق
├── printer_nader.vbproj        # ملف المشروع
└── My Project/
    ├── Application.Designer.vb
    └── Application.myapp
```

## التفاصيل التقنية

### الإطار البرمجي
- **Target Framework**: net8.0-windows
- **اللغة**: Visual Basic .NET
- **واجهة المستخدم**: Windows Forms
- **نسخة SDK**: 8.0.412

### الباكجات المستخدمة
- `ZXing.Net` v0.16.11 - مكتبة توليد الباركود
- `ZXing.Net.Bindings.Windows.Compatibility` v0.16.14 - دعم Bitmap

### التعديلات لـ Replit
- إضافة خاصية `EnableWindowsTargeting` للسماح بالبناء على Linux
- المشروع يبني بنجاح رغم استهداف Windows

## الوظائف الرئيسية

### 1. مقاس الطباعة بالملم
- **حرارة الطباعة**: تحكم في درجة حرارة الطباعة (افتراضي: 15)
- **العرض**: تحديد عرض الملصق (افتراضي: 40مم)
- **الطول**: تحديد طول الملصق (افتراضي: 25مم)

### 2. مقاسات الباركود
- **X1 و X2**: يحددان موضع بداية ونهاية الباركود على المحور X، والفرق بينهما يحدد عرض الباركود
  - العرض الفعلي للباركود = |X2 - X1| ملم
- **Y**: يحدد الموضع العمودي للباركود على الملصق
- **Narrow Bar Width**: عرض الخط الضيق في الباركود (افتراضي: 2)
  - يؤثر على نسبة الضغط في مكتبة ZXing
- **Wide Bar Width**: عرض الخط العريض في الباركود (افتراضي: 4)
  - يؤثر على نسبة الضغط في مكتبة ZXing

### 3. إعدادات الطابعة
- **خيار 2x1**: تفعيل/تعطيل وضع طباعة ملصقين لكل صفحة
- **اسم الطابعة**: إدخال اسم الطابعة المستخدمة (افتراضي: Xprinter XP-370B)
- **زر فتح الطبعة**: لمعاينة الطباعة قبل التنفيذ

### 4. معلومات إضافية
- **X**: موضع الرقم على المحور X (افتراضي: 31)
- **Y**: موضع الرقم على المحور Y (افتراضي: 7)
- **Number Size**: حجم خط الرقم (افتراضي: 47)
- **# Size**: حجم رمز الهاش (اختياري)

### 5. منطقة المعاينة
- عرض الرقم الأول والأخير في المدى المطلوب
- إمكانية النقر على الأرقام لتعديلها
- زر "طباعة جديد" للبدء بعملية الطباعة

### 6. خصائص الطباعة
- **وضع 2x1**: طباعة ملصقين في كل صفحة (افتراضي)
- **وضع 1x1**: طباعة ملصق واحد في كل صفحة (عند إلغاء تفعيل checkbox 2x1)
- توليد باركود CODE-128 تلقائياً
- التحقق من جميع الحقول قبل الطباعة
- رسائل تأكيد وتنبيه واضحة تعرض العدد الصحيح للصفحات حسب الوضع المختار
- جميع حقول الواجهة مربوطة بمنطق الرسم والطباعة:
  - حقول مقاسات الباركود تحدد موضع وحجم الباركود فعلياً
  - حقول المعلومات الإضافية تحدد موضع وحجم الرقم المطبوع
  - منطق pagination يحترم الوضع المختار (1x1 أو 2x1) بدون تخطي أرقام

## تعليمات البناء
```bash
cd printer_nader
dotnet build
```

## تعليمات الاستخدام (على Windows)
1. **افتح التطبيق** على جهاز Windows
2. **اضبط مقاس الطباعة**: أدخل حرارة الطباعة، العرض، والطول
3. **اضبط مقاسات الباركود**: حدد قيم X، Y، Narrow Bar Width، Wide Bar Width
4. **اختر الطابعة**: أدخل اسم الطابعة أو اتركها كما هي
5. **فعّل/عطّل وضع 2x1**: حسب الحاجة
6. **اضبط المعلومات الإضافية**: حدد موضع الرقم وحجم الخط
7. **عدّل نطاق الأرقام**: اضغط على أرقام المعاينة لتعديل الرقم الأول والأخير
8. **معاينة الطباعة**: اضغط "فتح الطبعة" لرؤية المعاينة
9. **ابدأ الطباعة**: اضغط "طباعة جديد" لبدء عملية الطباعة

## القيود على Replit
تطبيقات Windows Forms مصممة لبيئة Windows. المشروع يبني بنجاح على Replit لكن تشغيل الواجهة يحتاج:
1. بيئة Windows
2. طبقة توافق Wine (دعم محدود لتطبيقات .NET)
3. تحويل لإطار عمل متعدد المنصات

## التطوير
التطبيق جاهز للاستخدام ويحتوي على:
- واجهة مستخدم كاملة باللغة العربية مع 5 مجموعات رئيسية (GroupBoxes)
- منطق طباعة متكامل بنظامين (2x1 و 1x1)
- توليد باركود CODE-128 مع تحكم كامل في الموضع والحجم
- معاينة قبل الطباعة
- دعم جميع الطابعات
- جميع حقول الإدخال مربوطة بالمنطق البرمجي وتؤثر فعلياً على الناتج

## إعدادات Debug المتقدمة
تم إضافة الإعدادات المتقدمة في مجلد `.vscode/`:
- **launch.json**: إعدادات التشغيل والتصحيح (Debug/Release/Attach)
- **tasks.json**: مهام البناء والنشر (build/clean/publish/restore)
- **settings.json**: إعدادات VS Code وتحسينات الإنتاجية

راجع ملف `DEBUG_GUIDE.md` للمزيد من التفاصيل حول كيفية استخدام هذه الإعدادات.

## اعتبارات مستقبلية
- إضافة دعم صيغ باركود أخرى (QR Code, EAN-13)
- حفظ الإعدادات
- دعم طباعة أكثر من ملصقين في الصفحة
- تصدير إلى PDF
